第二章 着色器语言
====
## 1. 着色语言概述
> OpenGL ES 着色语言是一种高级的图形编程语言，其源自广泛应用的C语言、同时具有RenderMan以及其它着色语言的一些优良特性，易于被开发人员掌握。

>与传统通用的编程语言有很大不同的是，其提供了更加丰富的原生类型，如向量、矩阵等，这些新特性的加入使得OpenGL ES 着色语言在处理3D图形方面更加高效、易用。简单来说,OpenGL ES 着色语言主要包括以下特性.
+ OpenGL ES 着色语言是一种的过程性语言（注意:不是面向对象）
+ 对定点着色器、片元着色器使用的是同样的语言，不做区分
+ 基于c/c++的语法及流程控制
+ 完美支持向量与矩阵的各种操作
+ 通过类型限定符来管理输入与输出
+ 拥有大量的内置函数来提供丰富的功能

   `总之,OpenGL ES 着色语言是一种易于实现、功能强大、便于使用、完美支持硬件灵活性，并且可以高度并行处理、性能优良的高级图形编程语言。其可以帮助开发人员在不浪费大量的时间的情况下，轻松地为用户带来更加完美的视觉体验，开发出更加酷炫的3D场景与特效。`

   `对于3D游戏开发人员来说，掌握这门语言尤为重要。本章的后继美容将从多个方面介绍OpenGL ES 着色语言的基本知识，使得读者初步了解着色语言，为以后深入地学习打下坚实的基础.`

## 2. 着色语言基础
  >OpenGL ES 着色语言虽然是基于c/c++语法的语言，但是其余c/c++ 相比较还是有很大不同的。例如，该语言不支持双精度浮点型(double)、字节型(byte)、短整型(short)、长整型（long），并且取消了C语言中的联合体（union）、枚举类型（enum）、无符号整型（unsigned）以及位运算等特性。

### 2.1 数据类型概述
>与C语言类似，着色语言中有许多内建的原生数据类型，如浮点型(float)、布尔类型(bool)、整型(int)、矩阵型(matrix)以及向量类型(vec2,vec3等)等。总体来说，这些数据可以分为标量、向量、矩阵、采样器、结构体以及数组等几类。

#### 2.1.1 标量
  `标量也被称为“无向量” ，其值只具有大小，并不具有方向。标量之间的运算遵循简单的代数法则，如质量、密度、体积、时间以及温度等都属于标量。OpenGL ES 着色语言支持的标量类型有bool、int、float,各自的用法如下所列。`
* 布尔型----bool

  `布尔型用来声明一个单独的布尔数，其值只能为true与false中的一个，bool类型的值一般由关系运算或者逻辑运算产生，在着色语言的流程控制中只能使用布尔类型的值作为表达式，其基本用法如下所示:`

  >bool b;//声明一个布尔类型的变量

* 整型----int

  `整型用来声明一个单独的整数，其值可以为正数，负数及0。与c语言的整型有所不同，在OpenGL ES 着色语言中的整数保证最少支持16位精度。开发时注意运算需要在正确的范围内进行(若16位精度范围为[-65535~65536],着色语言中所谓的精度不含符号位)，超出运算范围可能产生溢出问题.`

  `OpenGL ES着色语言中整数也可以像C语言中一样，用十进制、八进制、或者十六进制等不同的进制表示，基本用法如下所示:`
  >int a=15;//十进制<br>
  >int b=x36;//0开头的字面常量为八进制，代表十进制的30<br>
  >int c=0x3D;//0x开头的字面常量为十六进制，代表十进制的58

* 浮点型---float

  `浮点型用来声明一个单独的浮点数、基本用法如下所示。`
  >float f;//声明一个float型的变量<br>
  float g=2.0;//在声明变量的同时为变量赋值<br>
  float h,i;//同时声明多个变量<br>
  float j,k=2.561;//声明多个变量是，可以为其中某些变量赋初值

  + 需要注意的是，由于OpenGL ES着色语言中没有像C/C++语言一样提供多种不同精度的整数与浮点数，因此代码中字面常量就不需要使用后缀来说明精度了，只要给出值即可。

#### 2.1.2 向量
  `OpenGL ES着色语言中，向量可以看做是用同样类型的标量组成的，其基本类型也分为bool、int、float 3种。每个向量就可以由2个、3个或者4个相同的标量组成，具体情况如下`

  |向量类型|说明|向量类型|说明|
  |-|-|-|-|
  |vec2|包含了2个浮点数的向量|ivec4|包含了4个整数的向量|
  |vec3|包含了3个浮点数的向量|bvec2|包含了2个布尔数的向量|
  |vec4|包含了4个浮点数的向量|bvec3|包含了3个布尔数的向量|
  |ivec2|包含了2个整数的向量|bvec4|包含了4个布尔数的向量|
  |ivec3|包含了3个整数的向量| | | |

  `声明向量类型的基本语法如下.`<br>
  >vec2 v2;//声明一个vec2类型的向量<br>
  ivec3 v3;//声明一个ivec3类型的向量<br>
  bvec4 v4;//声明一个bvec4类型的向量

  `向量在着色器代码中开发中有着十分重要的作用，可以很方便地存储以及操作颜色、位置、纹理坐标等不仅包含一个组成部分的量。开发中，有时也可能需要单独访问想向量中的某个分量买几本的语法为"<向量名>.<分量名>"，根据目的的不同，主要有以下几种用法。`
+ 将一个向量看做颜色是，可以使用r、g、b、a 4个分量名，其分别代表红、绿、蓝、透明度4个色彩通道，具体用法如下。

>aColor.r=0.6;//给向量aColor的红色通道分量赋值<br>
aColor.g=0.8;//给向量aColor绿色通道分量赋值

  `若向量是4维的，则可以使用的分量名为:r、g、b、a；若向量是3维的，则可以使用的分量名为r、g、b；若为2维的，则可以使用r、g。`

+ 将一个向量看做位置时，可以使用x、y、z、w等四个分量名，其分表代表X轴、Y轴、Z轴、向量的4个分量，具体用法如下。<br>
  >aPosition.x=67.2;//给向量aPosition的X轴分量赋值<br>
   aPosition.z=48.3;//给向量aPosition的z轴分量赋值<br>

   `若向量是4维的，则可以使用的分量名为:x、y、z、w；若向量是3维的，则可以使用的分量名为x、y、z；若为2维的，则可以使用x、y。`

+ 将一个向量看做纹理坐标时，可以使用s、t、p、q等4个分量名，其分别代表纹理坐标的不同分量，具体用法如下。<br>
>aTexCoor.s=0.65;//给向量aTexCoor的s分量赋值<br>
 aTexCoor.t=0.34;//给向量aTexCoor的t分量赋值<br>

   `若向量是4维的，则可以使用的分量名为:s、t、p、q；若向量是3维的，则可以使用的分量名为s、t、p；若为2维的，则可以使用s、t。`
   + 访问向量中的各个分量不但可以采用“.”加上不同的分量名，还可以将向量看做一个数组，用下标来进行访问，具体用法如下。<br>
   >aColor[0]=0.6;//给向量aColor红色通道分量赋值
    aPosition[2]=48.3;//给向量aPosition的z轴分量赋值
    aTexCoor[1]=0.34;//给向量aTexCoor的t分量赋值

#### 2.1.3 矩阵
#### 2.1.4 采样器
#### 2.1.5 结构体
#### 2.1.6 数组
#### 2.1.7 空类型

### 2.2 数据类型的基本使用
### 2.3 运算符
### 2.4 类型转换
### 2.5 限定符
### 2.6 流程控制
### 2.7 函数的声明与使用
### 2.8 片元着色器中的浮点变量精度的指定
### 2.9 流程的基本结构
## 3. 特殊的内建变量
### 3.1 顶点着色器中的内建变量
### 3.2 片元着色器中内建变量
## 4. 着色器语言内置函数
### 4.1 着色器语言的内置函数
### 4.2 指数函数
### 4.3 常见函数
### 4.4 几何函数
### 4.5 矩阵函数
### 4.6 向量关系函数
### 4.7 纹理采样函数
### 4.8 微分函数
## 5. 本章小结
